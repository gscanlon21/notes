{% import "macros/macros.html" as macros %}
{% extends "partials/base.html" %}

{% block content %}
    <div class="header-wrap">
        <div class="sidebar-left header header-wrap">
            {% include "partials/summary.html" %}
            {% include "partials/toc.html" %}
        </div>

        <div class="sidebar-right header">
			<div class="header-item defer">
				<h3 class="sitemap-title header-title">Ancestors</h3>
				<nav class="sitemap condensed">
					{{ macros::render_ancestors(ancestors=page.ancestors) }}
				</nav>
			</div>
            
			<div class="header-item defer">
            	{{ macros::render_siblings(for=page) }}
            </div>

            <div class="header-item screen-large">
                <h3 class="sitemap-title">Sitemap</h3>
                <nav class="sitemap">
                    {{ macros::render_sitemap(path="_index.md", open=false) }}
                </nav>
            </div>
        </div>
    </div>

    <article id="content" class="page v{{ page.extra.site_version | default(value=1) }}">{{ page.content | safe }}</article>

	{% set js = load_data(path=page.path ~ "index.js", required=false) %}
    {% if js %}<script type="module">{{ js | safe }}</script>{% endif %}

    {% set css = load_data(path=page.path ~ "index.css", required=false) %}
    {% if css %}<style>article#content.page { {{ css | safe }} }</style>{% endif %}

	{% if lang != config.default_language %}
		{% set submodule_path = page.path | split(pat=lang) | last %}
		{% set noCss = load_data(path=submodule_path ~ "index.no.css", required=false) %}
		{% if noCss %}<style>article#content.page { {{ noCss | safe }} }</style>{% endif %}
	{% endif %}
{% endblock content %}
  